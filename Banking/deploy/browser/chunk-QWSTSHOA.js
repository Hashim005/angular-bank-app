import{A as T,W as L,ia as x,j as M,ja as j,k as E,ka as z,m as b,n as k,o as v,q as I,r as S,t as P,v as R,w as F,x as N,y as D,z as B}from"./chunk-HZ4N2HFF.js";import{Fb as r,Gb as i,Hb as f,Nb as g,Ob as _,Sc as C,Wc as H,Yb as a,Zb as A,_b as O,ab as l,bb as u,ea as p,na as w,oa as h,rb as d,wb as c}from"./chunk-RRTI3STN.js";function X(e,o){if(e&1&&(r(0,"div",10),a(1),i()),e&2){let n=_();l(),O(" ",n.errorMessage," ")}}var V=(()=>{class e{fb;authService;router;loginForm;errorMessage=null;constructor(n,s,t){this.fb=n,this.authService=s,this.router=t,this.loginForm=this.fb.group({accountNumber:[],password:[""]})}onLogin(){let{accountNumber:n,password:s}=this.loginForm.value;this.authService.loginBankUser(n,s).subscribe(t=>{if(t.length>0){let m=t[0];this.authService.setCurrentUser(m),this.router.navigate(["/dashboard/"])}else this.errorMessage="Invalid account Number or password",this.authService.clearCurrentUser()},t=>{console.error("Login error:",t),this.errorMessage="An error occurred during login",this.authService.clearCurrentUser()})}static \u0275fac=function(s){return new(s||e)(u(N),u(T),u(M))};static \u0275cmp=w({type:e,selectors:[["app-login"]],decls:17,vars:3,consts:[[1,"container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","accountNumber"],["type","text","id","accountNumber","formControlName","accountNumber",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","/register",1,"btn","btn-primary","router-link"],[1,"error-message"]],template:function(s,t){s&1&&(r(0,"div",0)(1,"h2"),a(2,"Login"),i(),r(3,"form",1),g("ngSubmit",function(){return t.onLogin()}),r(4,"div",2)(5,"label",3),a(6,"Account Number:"),i(),f(7,"input",4),i(),r(8,"div",2)(9,"label",5),a(10,"Password:"),i(),f(11,"input",6),i(),d(12,X,2,1,"div",7),r(13,"button",8),a(14," Login "),i(),r(15,"button",9),a(16," Register "),i()()()),s&2&&(l(3),c("formGroup",t.loginForm),l(9),c("ngIf",t.errorMessage),l(),c("disabled",t.loginForm.invalid))},dependencies:[C,E,P,k,I,S,R,F],styles:[".container[_ngcontent-%COMP%]{max-width:400px;margin:50px auto;background-color:#f9f9f9;padding:30px;border-radius:10px;box-shadow:0 4px 8px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:20px;font-size:24px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{font-weight:700;color:#555;font-size:14px;margin-bottom:5px;display:block}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border:1px solid #ccc;border-radius:5px;transition:border-color .3s ease}input[type=text][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;box-shadow:0 0 8px #007bff33}button[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border-radius:5px;border:none;cursor:pointer;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3}button.router-link[_ngcontent-%COMP%]{margin-top:10px;background-color:#28a745;color:#fff}button.router-link[_ngcontent-%COMP%]:hover{background-color:#218838}@media (max-width: 600px){.container[_ngcontent-%COMP%]{margin:20px auto;padding:20px}h2[_ngcontent-%COMP%]{font-size:20px}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:14px;padding:8px}}"]})}return e})();function J(e,o){e&1&&(r(0,"span"),a(1,"Account number is required."),i())}function Q(e,o){e&1&&(r(0,"span"),a(1,"please type correct account number formate. for instance: 12345678912 (11 digits)"),i())}function ee(e,o){if(e&1&&(r(0,"span",17),d(1,J,2,0,"span",14)(2,Q,2,0,"span",14),i()),e&2){let n=_();l(),c("ngIf",n.form.accountNumber.errors==null?null:n.form.accountNumber.errors.required),l(),c("ngIf",n.form.accountNumber.errors==null?null:n.form.accountNumber.errors.pattern)}}function te(e,o){e&1&&(r(0,"div",17),a(1,"Account number already exists."),i())}function ie(e,o){e&1&&(r(0,"span"),a(1,"Name is required."),i())}function ne(e,o){e&1&&(r(0,"span"),a(1,"this is not a username formate."),i())}function re(e,o){if(e&1&&(r(0,"span",17),d(1,ie,2,0,"span",14)(2,ne,2,0,"span",14),i()),e&2){let n=_();l(),c("ngIf",n.form.name.errors==null?null:n.form.name.errors.required),l(),c("ngIf",n.form.name.errors==null?null:n.form.name.errors.pattern)}}function oe(e,o){e&1&&(r(0,"span"),a(1,"Password is required."),i())}function se(e,o){if(e&1&&(r(0,"span",17),d(1,oe,2,0,"span",14),i()),e&2){let n=_();l(),c("ngIf",n.form.password.errors==null?null:n.form.password.errors.required)}}function ae(e,o){e&1&&(r(0,"span"),a(1,"Confirm Password is required."),i())}function le(e,o){if(e&1&&(r(0,"span",17),d(1,ae,2,0,"span",14),i()),e&2){let n=_();l(),c("ngIf",n.form.confirmPassword.errors==null?null:n.form.confirmPassword.errors.required)}}function ce(e,o){e&1&&(r(0,"div")(1,"span",18),a(2,"Passwords do not match. Please type correctly."),i()())}function de(e,o){e&1&&(r(0,"div")(1,"span",18),a(2,"Password must be at least 5 characters long."),i()())}var q=(()=>{class e{authService;fb;router;bankRegisterUserForm;hide=!0;userExists=!1;constructor(n,s,t){this.authService=n,this.fb=s,this.router=t,this.bankRegisterUserForm=this.fb.group({accountNumber:[,[v.required,v.pattern(/^([0-9]{11})|([0-9]{2}-[0-9]{3}-[0-9]{6})$/)]],name:["",[v.required,v.pattern("^[A-Za-z][A-Za-z0-9_]{4,29}$")]],password:["",v.required],confirmPassword:["",v.required]},{validators:this.passwordChecker()})}get form(){return this.bankRegisterUserForm.controls}passwordChecker(){return n=>{let s=n.get("password"),t=n.get("confirmPassword");if(!s||!t)return null;let m={};return s.value!==t.value&&(m.passwordMissMatch=!0),s.value.length<5&&(m.PassWordLengthIssue=!0),Object.keys(m).length?m:null}}onSubmit(){if(this.bankRegisterUserForm.valid){let n=this.bankRegisterUserForm.value.accountNumber;this.authService.checkUserExist(n).subscribe(s=>{if(this.userExists=s,this.userExists)alert("Account number already exists. Please use a different account number.");else{let t=this.bankRegisterUserForm.value;this.authService.registerBankUserDetails(t).subscribe(m=>{alert("Registration successful"),this.router.navigate(["/auth/login"])},m=>{alert("Registration failed")})}})}}toggleHide(){this.hide=!this.hide}static \u0275fac=function(s){return new(s||e)(u(T),u(N),u(M))};static \u0275cmp=w({type:e,selectors:[["app-register"]],decls:35,vars:11,consts:[[1,"container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","accountNumber"],["type","text","id","accountNumber","formControlName","accountNumber",1,"form-control"],["class","error-message",4,"ngIf"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["for","password"],[1,"password-wrapper"],["id","password","formControlName","password",1,"form-control",3,"type"],["type","button","mat-icon-button","","tabindex","-1",1,"toggle-password",3,"click"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control"],[4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","/login","type","submit",1,"btn","btn-primary"],[1,"error-message"],[1,"error-message","text-danger"]],template:function(s,t){s&1&&(r(0,"div",0)(1,"h2"),a(2,"Register"),i(),r(3,"form",1),g("ngSubmit",function(){return t.onSubmit()}),r(4,"div",2)(5,"label",3),a(6,"Account Number:"),i(),f(7,"input",4),d(8,ee,3,2,"span",5)(9,te,2,0,"div",5),i(),r(10,"div",2)(11,"label",6),a(12,"Name:"),i(),f(13,"input",7),d(14,re,3,2,"span",5),i(),r(15,"div",2)(16,"label",8),a(17,"Password:"),i(),r(18,"div",9),f(19,"input",10),r(20,"button",11),g("click",function(){return t.hide=!t.hide}),r(21,"mat-icon"),a(22),i()()(),d(23,se,2,1,"span",5),i(),r(24,"div",2)(25,"label",12),a(26,"Confirm Password:"),i(),f(27,"input",13),d(28,le,2,1,"span",5),i(),d(29,ce,3,0,"div",14)(30,de,3,0,"div",14),r(31,"button",15),a(32," Register "),i(),r(33,"button",16),a(34," Back To Login "),i()()()),s&2&&(l(3),c("formGroup",t.bankRegisterUserForm),l(5),c("ngIf",t.form.accountNumber.invalid&&t.form.accountNumber.touched),l(),c("ngIf",t.userExists),l(5),c("ngIf",t.form.name.invalid&&t.form.name.touched),l(5),c("type",t.hide?"password":"text"),l(3),A(t.hide?"visibility":"visibility_off"),l(),c("ngIf",t.form.password.invalid&&t.form.password.touched),l(5),c("ngIf",t.form.confirmPassword.invalid&&t.form.confirmPassword.touched),l(),c("ngIf",t.bankRegisterUserForm.hasError("passwordMissMatch")&&(t.form.password.touched||t.form.confirmPassword.touched)),l(),c("ngIf",t.bankRegisterUserForm.hasError("PassWordLengthIssue")&&t.form.password.touched),l(),c("disabled",t.bankRegisterUserForm.invalid))},dependencies:[C,E,P,k,I,S,R,F,j],styles:["input[type=password][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{width:calc(100% - 40px);padding-right:40px}.toggle-password[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;color:#555}.container[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;padding:20px;background-color:#f8f9fa;border-radius:8px;box-shadow:0 4px 8px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-family:Roboto,sans-serif;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-size:14px;font-weight:700;color:#555}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border:1px solid #ced4da;border-radius:4px;transition:border-color .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 5px #007bff40;outline:none}.password-wrapper[_ngcontent-%COMP%]{position:relative}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer}.toggle-password[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;color:#007bff}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:5px;display:block}.text-danger[_ngcontent-%COMP%]{color:#dc3545}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;font-weight:700;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease;margin-bottom:10px}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3}button[routerLink][_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;font-weight:700;color:#fff;background-color:#6c757d;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease}button[routerLink][_ngcontent-%COMP%]:hover{background-color:#5a6268}@media (max-width: 600px){.container[_ngcontent-%COMP%]{padding:15px}.form-control[_ngcontent-%COMP%]{font-size:14px}button[type=submit][_ngcontent-%COMP%], button[routerLink][_ngcontent-%COMP%]{padding:10px;font-size:14px}}"]})}return e})();var me=[{path:"login",component:V},{path:"register",component:q}],U=(()=>{class e{static \u0275fac=function(s){return new(s||e)};static \u0275mod=h({type:e});static \u0275inj=p({imports:[b.forChild(me),b]})}return e})();var W=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=h({type:o}),o.\u0275inj=p({});let e=o;return e})();var Z=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=h({type:o}),o.\u0275inj=p({imports:[L,x,x,W,L]});let e=o;return e})();var nt=(()=>{class e{static \u0275fac=function(s){return new(s||e)};static \u0275mod=h({type:e});static \u0275inj=p({imports:[H,U,B,D,b,z,x,Z]})}return e})();export{nt as AuthModuleModule};
